# Функциональность поиска

## Обзор

Реализована функциональность глобального поиска, которая работает на следующих страницах:
- **Главная** (`/dashboard`) - поиск по опросам
- **Мои опросы** (`/my-polls`) - поиск по созданным опросам
- **Рейтинг** (`/leaderboard`) - поиск по ФИО студентов

## Архитектура

### 1. SearchContext
Создан глобальный контекст `SearchContext` для управления состоянием поиска:
- `searchQuery` - текущий поисковый запрос
- `setSearchQuery` - функция для установки запроса
- `isSearchVisible` - видимость поля поиска
- `clearSearch` - функция очистки поиска

**Файл:** `client/src/contexts/SearchContext.js`

### 2. Header Component
Обновлен компонент заголовка:
- Использует `useLocation` для определения текущей страницы
- Показывает поле поиска только на разрешенных страницах
- Автоматически очищает поиск при переходе на другие страницы
- Меняет placeholder в зависимости от страницы

**Файл:** `client/src/components/Layout/Header.js`

### 3. Страницы с поиском

#### DashboardMain (Главная)
**Поиск по:**
- Названию опроса
- Описанию опроса
- ФИО автора опроса

**Функции:**
- Поиск работает совместно с фильтрами (Все, Активные, Завершенные, Мои голоса)
- Поиск работает совместно с фильтром по дате
- Регистронезависимый поиск

**Файл:** `client/src/pages/DashboardMain.js`

#### MyPolls (Мои опросы)
**Поиск по:**
- Названию опроса
- Описанию опроса

**Функции:**
- Поиск работает совместно с вкладками (Все, Активные, Завершенные)
- Регистронезависимый поиск

**Файл:** `client/src/pages/MyPolls.js`

#### Leaderboard (Рейтинг)
**Поиск по:**
- ФИО студента (полное имя)
- Группе студента

**Функции:**
- Отображается сообщение "Студенты не найдены" при отсутствии результатов
- Регистронезависимый поиск

**Файл:** `client/src/pages/Leaderboard.js`

## Технические детали

### Оптимизация производительности
Все фильтры поиска используют `useMemo` для предотвращения избыточных вычислений:
```javascript
const filteredItems = useMemo(() => {
  // логика фильтрации
}, [dependencies]);
```

### Логика поиска
1. Поисковый запрос приводится к нижнему регистру
2. Удаляются пробелы в начале и конце запроса
3. Выполняется поиск совпадений методом `.includes()`
4. Результаты объединяются по логическому ИЛИ (OR)

### Пример использования в компоненте

```javascript
import { useSearch } from '../contexts/SearchContext';

const MyComponent = () => {
  const { searchQuery } = useSearch();
  
  const filteredData = useMemo(() => {
    if (!searchQuery.trim()) {
      return data;
    }
    
    const query = searchQuery.toLowerCase().trim();
    return data.filter(item => 
      item.title?.toLowerCase().includes(query) ||
      item.description?.toLowerCase().includes(query)
    );
  }, [data, searchQuery]);
  
  // Отображение filteredData
};
```

## Интеграция

### App.js
Приложение обернуто в `SearchProvider`:
```javascript
<ThemeProvider>
  <AuthProvider>
    <SearchProvider>
      <BrowserRouter>
        {/* routes */}
      </BrowserRouter>
    </SearchProvider>
  </AuthProvider>
</ThemeProvider>
```

## UX особенности

1. **Динамический placeholder** - текст меняется в зависимости от страницы:
   - Главная/Мои опросы: "Поиск опросов..."
   - Рейтинг: "Поиск студентов по ФИО..."

2. **Автоочистка** - поиск автоматически очищается при переходе на страницы, где поиск недоступен

3. **Визуальный фидбек** - поле поиска подсвечивается при фокусе синей рамкой

4. **Пустые состояния** - на странице Рейтинга отображается сообщение, если ничего не найдено

## Возможные улучшения

1. **Debounce** - добавить задержку перед выполнением поиска для снижения нагрузки
2. **История поиска** - сохранение последних поисковых запросов
3. **Подсветка результатов** - выделение совпадений в результатах поиска
4. **Поиск по дополнительным полям** - расширение критериев поиска
5. **Серверный поиск** - для больших объемов данных перенести поиск на backend

















