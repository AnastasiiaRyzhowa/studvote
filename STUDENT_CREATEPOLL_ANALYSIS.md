# –ê–Ω–∞–ª–∏–∑ CreatePoll.js –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤

## 1. –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É

**–ü–æ–ª–Ω—ã–π –ø—É—Ç—å:** `/client/src/pages/CreatePoll.js`

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:** –°—Ç—É–¥–µ–Ω—Ç–æ–≤ –∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π (–Ω–µ –∞–¥–º–∏–Ω–æ–≤)

---

## 2. –í—ã–±–æ—Ä —Ü–µ–ª–µ–≤–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏

### –ú–µ—Ç–æ–¥ –≤—ã–±–æ—Ä–∞: –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π (—á–µ—Ä–µ–∑ `visibility`)

**–ù–ï–¢ –∫–∞—Å–∫–∞–¥–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ–≤!** –°—Ç—É–¥–µ–Ω—Ç –≤—ã–±–∏—Ä–∞–µ—Ç —Ç–æ–ª—å–∫–æ —É—Ä–æ–≤–µ–Ω—å –≤–∏–¥–∏–º–æ—Å—Ç–∏:

```jsx
// –°—Ç—Ä–æ–∫–∏ 1013-1034
<select
  name="visibility"
  value={formData.visibility}
  onChange={handleChange}
  disabled={submitting}
>
  <option value="public">{getVisibilityLabel('public')}</option>      // –í—Å–µ —Å—Ç—É–¥–µ–Ω—Ç—ã
  <option value="group">{getVisibilityLabel('group')}</option>        // –¢–æ–ª—å–∫–æ –º–æ—è –≥—Ä—É–ø–ø–∞
  <option value="faculty">{getVisibilityLabel('faculty')}</option>    // –ú–æ–π —Ñ–∞–∫—É–ª—å—Ç–µ—Ç
</select>
```

### –õ–µ–π–±–ª—ã –¥–ª—è –≤—ã–±–æ—Ä–∞:

```javascript
// –°—Ç—Ä–æ–∫–∏ 604-615
const getVisibilityLabel = (value) => {
  switch (value) {
    case 'public':
      return '–í—Å–µ —Å—Ç—É–¥–µ–Ω—Ç—ã';
    case 'group':
      return '–¢–æ–ª—å–∫–æ –º–æ—è –≥—Ä—É–ø–ø–∞';
    case 'faculty':
      return '–ú–æ–π —Ñ–∞–∫—É–ª—å—Ç–µ—Ç';
    default:
      return value;
  }
};
```

### State —Ñ–æ—Ä–º—ã:

```javascript
// –°—Ç—Ä–æ–∫–∏ 129-145
const [formData, setFormData] = useState({
  title: '',
  description: '',
  type: 'single',
  visibility: 'public',           // ‚Üê –í—ã–±–æ—Ä –∞—É–¥–∏—Ç–æ—Ä–∏–∏
  options: ['', ''],
  // ...
  target_groups: []               // ‚Üê –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!
});
```

---

## 3. –û—Ç–∫—É–¥–∞ –±–µ—Ä–µ—Ç—Å—è –≥—Ä—É–ø–ø–∞ —Å—Ç—É–¥–µ–Ω—Ç–∞

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

```javascript
// –°—Ç—Ä–æ–∫–∞ 126
const { user } = useAuth();

// –°—Ç—Ä–æ–∫–∏ 473-475 –≤ handleSubmit
target_groups: formData.target_groups && formData.target_groups.length
  ? formData.target_groups
  : (user?.group_id ? [user.group_id] : []),
```

**–õ–æ–≥–∏–∫–∞:**
1. –ï—Å–ª–∏ –≤ `formData.target_groups` —É–∂–µ –µ—Å—Ç—å –≥—Ä—É–ø–ø—ã ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö
2. –ò–Ω–∞—á–µ ‚Üí –≤–∑—è—Ç—å `user.group_id` –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. –ï—Å–ª–∏ –∏ —ç—Ç–æ–≥–æ –Ω–µ—Ç ‚Üí –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ `[]`

**–ü—Ä–∏–º–µ—Ä:**
```javascript
// –ï—Å–ª–∏ —Å—Ç—É–¥–µ–Ω—Ç –≤—ã–±—Ä–∞–ª visibility: 'group'
// –ò user.group_id = "12345"
// –¢–æ target_groups = ["12345"]
```

---

## 4. –§—É–Ω–∫—Ü–∏—è handleSubmit –ø–æ–ª–Ω–æ—Å—Ç—å—é

```javascript
// –°—Ç—Ä–æ–∫–∏ 445-503
const handleSubmit = async (e) => {
  e.preventDefault();
  setError('');

  if (!validateForm()) {
    return;
  }

  setSubmitting(true);

  try {
    const pollData = {
      title: formData.title.trim(),
      description: formData.description.trim(),
      type: formData.type, // 'single', 'multiple', 'rating'
      visibility: formData.visibility, // 'public', 'group', 'faculty'
      options: formData.options
        .filter(opt => opt.trim().length > 0)
        .map(opt => ({ text: opt.trim() })),
      start_date: new Date(formData.start_date).toISOString(),
      end_date: new Date(formData.end_date).toISOString(),
      status: 'active',
      is_anonymous: formData.is_anonymous,
      show_results: formData.show_results,
      subject_id: formData.subject_id || undefined,
      subject_name: formData.subject_name || undefined,
      topic: formData.topic || undefined,
      teacher_name: formData.teacher_name || undefined,
      
      // ===== –ö–õ–Æ–ß–ï–í–û–ï: –ê–í–¢–û–ü–û–î–°–¢–ê–ù–û–í–ö–ê –ì–†–£–ü–ü–´ =====
      target_groups: formData.target_groups && formData.target_groups.length
        ? formData.target_groups
        : (user?.group_id ? [user.group_id] : []),
      
      // –ü—É—Å—Ç—ã–µ –º–∞—Å—Å–∏–≤—ã –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
      target_faculties: [],
      target_programs: [],
      target_courses: []
    };
    
    console.log('–û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ–ø—Ä–æ—Å–∞:', pollData);

    // –î–æ–±–∞–≤–ª—è–µ–º max_choices —Ç–æ–ª—å–∫–æ –¥–ª—è multiple —Ç–∏–ø–∞
    if (formData.type === 'multiple' && formData.max_choices) {
      pollData.max_choices = parseInt(formData.max_choices);
    }

    await createPoll(pollData);
    
    setSuccessMessage('–û–ø—Ä–æ—Å —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!');
    
    setTimeout(() => {
      navigate('/dashboard');
    }, 1000);

  } catch (err) {
    console.error('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ–ø—Ä–æ—Å–∞:', err);
    setError(err.response?.data?.message || '–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –æ–ø—Ä–æ—Å');
  } finally {
    setSubmitting(false);
  }
};
```

---

## 5. Payload, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### –ü—Ä–∏–º–µ—Ä –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞ –∏–∑ –≥—Ä—É–ø–ø—ã "22–ú–û05" (group_id: "12345"):

```javascript
// POST /api/polls/create
{
  // –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
  "title": "–í—ã–±–æ—Ä —Å—Ç–∞—Ä–æ—Å—Ç—ã –≥—Ä—É–ø–ø—ã",
  "description": "–ü—Ä–æ–≥–æ–ª–æ—Å—É–π—Ç–µ –∑–∞ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞",
  "type": "single",
  "visibility": "group",
  
  // –í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤
  "options": [
    { "text": "–ò–≤–∞–Ω–æ–≤ –ò.–ò." },
    { "text": "–ü–µ—Ç—Ä–æ–≤ –ü.–ü." }
  ],
  
  // –î–∞—Ç—ã
  "start_date": "2026-01-15T12:00:00.000Z",
  "end_date": "2026-01-22T12:00:00.000Z",
  "status": "active",
  
  // –ù–∞—Å—Ç—Ä–æ–π–∫–∏
  "is_anonymous": false,
  "show_results": "immediate",
  
  // –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –ø—Ä–µ–¥–º–µ—Ç—É (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  "subject_id": undefined,
  "subject_name": undefined,
  "topic": undefined,
  "teacher_name": undefined,
  
  // ===== –¶–ï–õ–ï–í–ê–Ø –ê–£–î–ò–¢–û–†–ò–Ø =====
  "target_groups": ["12345"],     // ‚Üê –ê–≤—Ç–æ–ø–æ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ –≥—Ä—É–ø–ø–∞ —Å—Ç—É–¥–µ–Ω—Ç–∞!
  "target_faculties": [],
  "target_programs": [],
  "target_courses": []
}
```

### –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω `visibility: 'public'`:

```javascript
{
  // ... –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ ...
  "visibility": "public",
  "target_groups": ["12345"],     // ‚Üê –í—Å–µ —Ä–∞–≤–Ω–æ –≥—Ä—É–ø–ø–∞ —Å—Ç—É–¥–µ–Ω—Ç–∞
  "target_faculties": [],
  "target_programs": [],
  "target_courses": []
}
```

### –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω `visibility: 'faculty'`:

```javascript
{
  // ... –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ ...
  "visibility": "faculty",
  "target_groups": ["12345"],     // ‚Üê –ì—Ä—É–ø–ø–∞ —Å—Ç—É–¥–µ–Ω—Ç–∞
  "target_faculties": [],         // ‚Üê –§–∞–∫—É–ª—å—Ç–µ—Ç –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞ backend!
  "target_programs": [],
  "target_courses": []
}
```

---

## 6. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API /directory/structure

**‚ùå –ù–ï–¢!** –°—Ç—É–¥–µ–Ω—á–µ—Å–∫–∏–π CreatePoll **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç** –∫–∞—Å–∫–∞–¥–Ω—ã–µ —Å–µ–ª–µ–∫—Ç—ã.

```javascript
// –í –∫–æ–¥–µ –ù–ï–¢:
// - import { getStructure } from '../services/directoryService';
// - const [structure, setStructure] = useState([]);
// - await getStructure();
// - –ö–∞—Å–∫–∞–¥–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ–≤ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç ‚Üí –ø—Ä–æ–≥—Ä–∞–º–º–∞ ‚Üí –∫—É—Ä—Å ‚Üí –≥—Ä—É–ø–ø–∞
```

**–°—Ç—É–¥–µ–Ω—Ç –ù–ï –º–æ–∂–µ—Ç:**
- ‚ùå –í—ã–±—Ä–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –≥—Ä—É–ø–ø—É (–∫—Ä–æ–º–µ —Å–≤–æ–µ–π)
- ‚ùå –í—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–π —Ñ–∞–∫—É–ª—å—Ç–µ—Ç
- ‚ùå –í—ã–±—Ä–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É
- ‚ùå –í—ã–±—Ä–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫—É—Ä—Å

---

## 7. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –≥—Ä—É–ø–ø—ã

**‚úÖ –î–ê!** –ì—Ä—É–ø–ø–∞ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –°–û–ó–î–ê–ù–ò–ï –û–ü–†–û–°–ê –°–¢–£–î–ï–ù–¢–û–ú                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

1. –°—Ç—É–¥–µ–Ω—Ç –∑–∞—Ö–æ–¥–∏—Ç –≤ CreatePoll
   ‚Üì
   const { user } = useAuth();
   // user.group_id = "12345" (–≥—Ä—É–ø–ø–∞ —Å—Ç—É–¥–µ–Ω—Ç–∞)

2. –°—Ç—É–¥–µ–Ω—Ç –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É:
   - –ù–∞–∑–≤–∞–Ω–∏–µ –æ–ø—Ä–æ—Å–∞
   - –í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤
   - –í—ã–±–∏—Ä–∞–µ—Ç visibility: "group" (–∏–ª–∏ "public", "faculty")

3. –°—Ç—É–¥–µ–Ω—Ç –Ω–∞–∂–∏–º–∞–µ—Ç "–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å"
   ‚Üì
   handleSubmit()
   ‚Üì
   target_groups: user?.group_id ? [user.group_id] : []
   ‚Üì
   target_groups: ["12345"]  ‚Üê –ê–≤—Ç–æ–ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞!

4. –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä:
   POST /api/polls/create
   {
     "visibility": "group",
     "target_groups": ["12345"],  ‚Üê –ì—Ä—É–ø–ø–∞ —Å—Ç—É–¥–µ–Ω—Ç–∞
     ...
   }
```

---

## 8. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: –°—Ç—É–¥–µ–Ω—Ç vs –ê–¥–º–∏–Ω

### –°—Ç—É–¥–µ–Ω—Ç (CreatePoll.js):

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –í—ã–±–æ—Ä —Ü–µ–ª–µ–≤–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏ (–°–¢–£–î–ï–ù–¢)      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  –ö—Ç–æ –≤–∏–¥–∏—Ç –æ–ø—Ä–æ—Å:                       ‚îÇ
‚îÇ  [‚ñº –¢–æ–ª—å–∫–æ –º–æ—è –≥—Ä—É–ø–ø–∞   ] ‚Üê dropdown    ‚îÇ
‚îÇ      - –í—Å–µ —Å—Ç—É–¥–µ–Ω—Ç—ã                     ‚îÇ
‚îÇ      - –¢–æ–ª—å–∫–æ –º–æ—è –≥—Ä—É–ø–ø–∞  ‚Üê –≤—ã–±—Ä–∞–Ω–æ     ‚îÇ
‚îÇ      - –ú–æ–π —Ñ–∞–∫—É–ª—å—Ç–µ—Ç                    ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  –ì—Ä—É–ø–ø–∞: 22–ú–û05  ‚Üê –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ user‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è:
{
  "visibility": "group",
  "target_groups": ["12345"]  ‚Üê ID –≥—Ä—É–ø–ø—ã —Å—Ç—É–¥–µ–Ω—Ç–∞
}
```

### –ê–¥–º–∏–Ω (CreatePoll.jsx):

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –í—ã–±–æ—Ä —Ü–µ–ª–µ–≤–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏ (–ê–î–ú–ò–ù)        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  –ö—Ç–æ –≤–∏–¥–∏—Ç –æ–ø—Ä–æ—Å:                       ‚îÇ
‚îÇ  [‚ñº –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –≥—Ä—É–ø–ø–∞   ] ‚Üê dropdown    ‚îÇ
‚îÇ      - –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –≥—Ä—É–ø–ø–∞  ‚Üê –≤—ã–±—Ä–∞–Ω–æ     ‚îÇ
‚îÇ      - –í–µ—Å—å —Ñ–∞–∫—É–ª—å—Ç–µ—Ç                   ‚îÇ
‚îÇ      - –í—Å—è –ø—Ä–æ–≥—Ä–∞–º–º–∞                    ‚îÇ
‚îÇ      - –í–µ—Å—å –∫—É—Ä—Å                        ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  üéØ –ö–∞—Å–∫–∞–¥–Ω—ã–π –≤—ã–±–æ—Ä:                    ‚îÇ
‚îÇ  1Ô∏è‚É£ –§–∞–∫—É–ª—å—Ç–µ—Ç:  [‚ñº –§–ò–¢–∏–ê–ë–î      ]      ‚îÇ
‚îÇ  2Ô∏è‚É£ –ü—Ä–æ–≥—Ä–∞–º–º–∞:  [‚ñº DevOps        ] ‚úÖ  ‚îÇ
‚îÇ  3Ô∏è‚É£ –ö—É—Ä—Å:       [‚ñº 2 –∫—É—Ä—Å        ] ‚úÖ  ‚îÇ
‚îÇ  4Ô∏è‚É£ –ì—Ä—É–ø–ø–∞:     [‚ñº 22–ú–û05        ] ‚úÖ  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è:
{
  "target_groups": ["12345"],  ‚Üê ID –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≥—Ä—É–ø–ø—ã
  "target_faculties": [],
  "target_programs": [],
  "target_courses": []
}
```

---

## 9. –û—Ç–∫—É–¥–∞ –±–µ—Ä–µ—Ç—Å—è user.group_id

### –ò–∑ AuthContext:

```javascript
// CreatePoll.js, —Å—Ç—Ä–æ–∫–∞ 126
const { user } = useAuth();

// user –æ–±—ä–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç:
{
  id: "user_id_123",
  email: "student@edu.hse.ru",
  full_name: "–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω",
  role: "student",
  group_id: "12345",       // ‚Üê ID –≥—Ä—É–ø–ø—ã –∏–∑ RUZ
  group: "22–ú–û05",         // ‚Üê –ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã
  faculty: "–§–ò–¢–∏–ê–ë–î",
  program: "DevOps",
  course: 2
}
```

### user.group_id —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è:

1. **–ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏** (Register.js):
   - –°—Ç—É–¥–µ–Ω—Ç –≤—ã–±–∏—Ä–∞–µ—Ç: –§–∞–∫—É–ª—å—Ç–µ—Ç ‚Üí –ü—Ä–æ–≥—Ä–∞–º–º–∞ ‚Üí –ö—É—Ä—Å ‚Üí –ì—Ä—É–ø–ø–∞
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è `groupId` –Ω–∞ `/auth/register`
   - Backend —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ User.group_id

2. **–ü—Ä–∏ –ª–æ–≥–∏–Ω–µ**:
   - Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç user –æ–±—ä–µ–∫—Ç —Å `group_id`
   - AuthContext —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ state

---

## 10. –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –∏–∑ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

### –î–ê, –µ—Å—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å RUZ API:

```javascript
// –°—Ç—Ä–æ–∫–∏ 180-201
useEffect(() => {
  const loadSubjects = async () => {
    if (!user?.group_id) return;
    
    try {
      setSubjectsLoading(true);
      
      const params = {};
      if (subjectsRange.start && subjectsRange.finish) {
        params.start = subjectsRange.start;
        params.finish = subjectsRange.finish;
      }
      
      // GET /api/schedule/subjects?groupId=12345&start=2026-01-15&finish=2026-01-22
      const res = await getSubjects(user.group_id, params);
      
      if (res.success) {
        setSubjects(res.subjects || []);
      }
    } catch (err) {
      console.error('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç—ã', err);
    } finally {
      setSubjectsLoading(false);
    }
  };
  
  loadSubjects();
}, [user, subjectsRange.start, subjectsRange.finish]);
```

**–≠—Ç–æ –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏ –æ–ø—Ä–æ—Å–∞ –∫ –ø—Ä–µ–¥–º–µ—Ç—É:**
```jsx
// –°—Ç—Ä–æ–∫–∏ 727-748
<select name="subject_id">
  <option value="">–ë–µ–∑ –ø—Ä–∏–≤—è–∑–∫–∏</option>
  {subjects.map((s) => (
    <option key={s.subjectId} value={s.subjectId}>
      {s.name} ¬∑ {s.teachers?.[0]?.name}
    </option>
  ))}
</select>
```

---

## 11. –†–µ–∑—é–º–µ

### ‚úÖ –ß—Ç–æ –ï–°–¢–¨ —É —Å—Ç—É–¥–µ–Ω—Ç–æ–≤:

1. –ü—Ä–æ—Å—Ç–æ–π –≤—ã–±–æ—Ä –≤–∏–¥–∏–º–æ—Å—Ç–∏ (public/group/faculty)
2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–≤–æ–µ–π –≥—Ä—É–ø–ø—ã
3. –ó–∞–≥—Ä—É–∑–∫–∞ —Å–≤–æ–∏—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –∏–∑ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
4. –®–∞–±–ª–æ–Ω—ã –æ–ø—Ä–æ—Å–æ–≤ (–¥–ª—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π)
5. AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–ø—Ä–æ—Å–æ–≤

### ‚ùå –ß–µ–≥–æ –ù–ï–¢ —É —Å—Ç—É–¥–µ–Ω—Ç–æ–≤:

1. –ö–∞—Å–∫–∞–¥–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ–≤ (—Ñ–∞–∫—É–ª—å—Ç–µ—Ç ‚Üí –ø—Ä–æ–≥—Ä–∞–º–º–∞ ‚Üí –∫—É—Ä—Å ‚Üí –≥—Ä—É–ø–ø–∞)
2. –í—ã–±–æ—Ä–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –¥—Ä—É–≥–æ–π –≥—Ä—É–ø–ø—ã
3. API `/directory/structure`
4. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ –≥—Ä—É–ø–ø
5. –î–µ—Ç–∞–ª—å–Ω–æ–≥–æ —Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥–∞ –∞—É–¥–∏—Ç–æ—Ä–∏–∏

### üéØ –û—Å–Ω–æ–≤–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –°—Ç—É–¥–µ–Ω—Ç | –ê–¥–º–∏–Ω |
|----------|---------|-------|
| **–§–∞–π–ª** | `CreatePoll.js` | `CreatePoll.jsx` |
| **–í—ã–±–æ—Ä –∞—É–¥–∏—Ç–æ—Ä–∏–∏** | Dropdown (3 –≤–∞—Ä–∏–∞–Ω—Ç–∞) | –ö–∞—Å–∫–∞–¥ (4 —É—Ä–æ–≤–Ω—è) |
| **API structure** | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |
| **–ì—Ä—É–ø–ø–∞** | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≤–æ—è | –í—ã–±–æ—Ä –ª—é–±–æ–π |
| **target_groups** | `[user.group_id]` | `[selected_group_id]` |
| **–°–ª–æ–∂–Ω–æ—Å—Ç—å** | –ü—Ä–æ—Å—Ç–∞—è | –ü–æ–ª–Ω–∞—è |

---

## 12. –ü—Ä–∏–º–µ—Ä —Å—Ü–µ–Ω–∞—Ä–∏—è

### –°—Ç—É–¥–µ–Ω—Ç –ò–≤–∞–Ω–æ–≤ (–≥—Ä—É–ø–ø–∞ 22–ú–û05, group_id: "12345"):

1. **–ó–∞—Ö–æ–¥–∏—Ç –≤ CreatePoll**
2. **–ó–∞–ø–æ–ª–Ω—è–µ—Ç:**
   - –ù–∞–∑–≤–∞–Ω–∏–µ: "–í—ã–±–æ—Ä —Å—Ç–∞—Ä–æ—Å—Ç—ã"
   - –í–∞—Ä–∏–∞–Ω—Ç—ã: "–ü–µ—Ç—Ä–æ–≤", "–°–∏–¥–æ—Ä–æ–≤"
   - Visibility: "–¢–æ–ª—å–∫–æ –º–æ—è –≥—Ä—É–ø–ø–∞"
3. **–ù–∞–∂–∏–º–∞–µ—Ç "–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å"**

**–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è:**
```json
{
  "title": "–í—ã–±–æ—Ä —Å—Ç–∞—Ä–æ—Å—Ç—ã",
  "type": "single",
  "visibility": "group",
  "options": [
    { "text": "–ü–µ—Ç—Ä–æ–≤" },
    { "text": "–°–∏–¥–æ—Ä–æ–≤" }
  ],
  "target_groups": ["12345"],  // ‚Üê –ê–≤—Ç–æ–ø–æ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ –≥—Ä—É–ø–ø–∞ –ò–≤–∞–Ω–æ–≤–∞
  "target_faculties": [],
  "target_programs": [],
  "target_courses": []
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –û–ø—Ä–æ—Å –≤–∏–¥–µ–Ω —Ç–æ–ª—å–∫–æ —Å—Ç—É–¥–µ–Ω—Ç–∞–º –≥—Ä—É–ø–ø—ã 22–ú–û05
- Backend –ø—Ä–æ–≤–µ—Ä–∏—Ç `Poll.isVisibleTo(user)` –ø–æ `target_groups`

---

–í–æ—Ç –∏ –≤—Å—è —Ä–∞–∑–Ω–∏—Ü–∞! –°—Ç—É–¥–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —É–ø—Ä–æ—â–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É —Å –∞–≤—Ç–æ–ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–æ–π —Å–≤–æ–µ–π –≥—Ä—É–ø–ø—ã. üéì
